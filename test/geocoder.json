{"openapi":"3.0.0","info":{"x-api-id":"geocoder-koumoul","title":"Géocodage d'adresses","description":"Ce service permet de géocoder des adresses, c'est à dire de déterminer des coordonnées latitude / longitude à partir d'éléments constituant une adresse comme le nom et le numéro de rue, le code postal ou le code INSEE, le nom de la ville ou une requête textuelle contenant ces différents éléments.","termsOfService":"https://koumoul.com/term-of-service","contact":{"name":"Koumoul","url":"https://koumoul.com","email":"support@koumoul.com"},"version":"1.0.0"},"servers":[{"url":"https://koumoul.com/s/geocoder/api/v1","description":"Serveur de production"}],"externalDocs":{"description":"Documentation Koumoul","url":"https://koumoul.com/documentation"},"components":{"securitySchemes":{"apiKey":{"type":"apiKey","name":"x-taxman-key","in":"header"},"jwt":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}},"security":[{"apiKey":[]},{"jwt":[]}],"paths":{"/status":{"get":{"summary":"Etat de santé du service.","description":"Pour connaitre l'état de santé du service.","operationId":"getStatus","x-operationType":"http://schema.org/CheckAction","responses":{"200":{"description":"Etat de santé du service","content":{"application/json":{"schema":{"title":"Statut du service","type":"object","properties":{"status":{"type":"string","enum":["ok","error"],"description":"Si le service fonctionne correctement ou non"},"message":{"type":"string","description":"Description de l'état du service en une phrase"},"details":{"type":"array","description":"Détail du statut des services utilisés","items":{"type":"object","properties":{"name":{"type":"string","description":"Identifiant du service"},"status":{"type":"string","enum":["ok","error"],"description":"Si le service fonctionne correctement ou non"},"details":{"type":"object","description":"Détail du statut du service utilisé"}}}}}},"example":{"value":{"status":"ok","message":"Service is ok","details":[{"name":"elasticsearch","status":"ok","details":{"number_of_pending_tasks":0,"number_of_in_flight_fetch":0,"task_max_waiting_in_queue_millis":0}},{"name":"redis","status":"ok","details":{"uptime_in_seconds":"1118273","uptime_in_days":"12","connected_clients":"3","blocked_clients":"0"}}]}}}}}}}},"/coord":{"get":{"summary":"Géocoder une adresse en récupérant la meilleure coordonnée possible","operationId":"getCoord","x-operationType":"http://schema.org/SearchAction","parameters":[{"in":"query","name":"select","description":"La liste des champs à retourner","required":false,"schema":{"default":["*"],"type":"array","items":{"type":"string","enum":["lat","lon","type","label","name","city","housenumber","postcode","citycode","context"]}},"style":"form","explode":false},{"name":"q","description":"Cette requête peut contenir n'importe quels éléments d'une adresse","in":"query","required":false,"schema":{"type":"string"},"x-refersTo":"http://schema.org/address"},{"name":"name","in":"query","required":false,"schema":{"type":"string"},"x-refersTo":"http://schema.org/streetAddress"},{"name":"city","in":"query","required":false,"schema":{"type":"string"},"x-refersTo":"http://schema.org/City"},{"name":"housenumber","description":"Peut contenir des mots comme bis ou ter","in":"query","required":false,"schema":{"type":"string"},"x-refersTo":"http://www.ontotext.com/proton/protonext#StreetNumber"},{"name":"postcode","description":"sur 5 caractères","in":"query","required":false,"schema":{"type":"string"},"x-refersTo":"http://schema.org/postalCode"},{"name":"citycode","description":"sur 5 caractères","in":"query","required":false,"schema":{"type":"string"},"x-refersTo":"http://rdf.insee.fr/def/geo#codeCommune"},{"name":"context","description":"Région et département ou autre information contextuelle de l'adresse","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"Coordonnées de l'adresse","content":{"application/json":{"schema":{"title":"Réponse","x-refersTo":"http://schema.org/GeoCoordinates","type":"object","properties":{"lat":{"x-refersTo":"http://schema.org/latitude","title":"Latitude","type":"number"},"lon":{"x-refersTo":"http://schema.org/longitude","title":"Longitude","type":"number"},"type":{"title":"Type d'élément retourné","type":"string","enum":["municipality","street","locality"]},"label":{"type":"string","title":"Libellé de localisation","description":"Libellé de la localisation construit à partir des champs individuels et en fonction du type"},"name":{"x-refersTo":"http://schema.org/streetAddress","type":"string","title":"Nom de la voie ou du lieu-dit"},"city":{"x-refersTo":"http://schema.org/City","type":"string","title":"Nom de la commune"},"housenumber":{"x-refersTo":"http://www.ontotext.com/proton/protonext#StreetNumber","type":"string","title":"Numéro dans la voie","description":"Peut contenir des mots comme bis ou ter"},"postcode":{"x-refersTo":"http://schema.org/postalCode","type":"string","title":"Code postal","description":"sur 5 caractères"},"citycode":{"x-refersTo":"http://rdf.insee.fr/def/geo#codeCommune","type":"string","title":"Code INSEE de la commune","description":"sur 5 caractères"},"context":{"type":"string","title":"Contexte","description":"Région et département ou autre information contextuelle de l'adresse"}}},"examples":{}}}},"404":{"description":"Aucune localisation n'a été trouvée pour les paramètres donnés en entrée."}}}},"/_search":{"get":{"summary":"Géocoder une adresse en retournant une liste de localisations candidates","operationId":"searchCoord","x-operationType":"http://schema.org/SearchAction","parameters":[{"in":"query","name":"select","description":"La liste des champs à retourner","required":false,"schema":{"default":["*"],"type":"array","items":{"type":"string","enum":["lat","lon","type","label","name","city","housenumber","postcode","citycode","context"]}},"style":"form","explode":false},{"name":"q","description":"Cette requête peut contenir n'importe quels éléments d'une adresse","in":"query","required":false,"schema":{"type":"string"},"x-refersTo":"http://schema.org/address"},{"name":"name","in":"query","required":false,"schema":{"type":"string"},"x-refersTo":"http://schema.org/streetAddress"},{"name":"city","in":"query","required":false,"schema":{"type":"string"},"x-refersTo":"http://schema.org/City"},{"name":"housenumber","description":"Peut contenir des mots comme bis ou ter","in":"query","required":false,"schema":{"type":"string"},"x-refersTo":"http://www.ontotext.com/proton/protonext#StreetNumber"},{"name":"postcode","description":"sur 5 caractères","in":"query","required":false,"schema":{"type":"string"},"x-refersTo":"http://schema.org/postalCode"},{"name":"citycode","description":"sur 5 caractères","in":"query","required":false,"schema":{"type":"string"},"x-refersTo":"http://rdf.insee.fr/def/geo#codeCommune"},{"name":"context","description":"Région et département ou autre information contextuelle de l'adresse","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"Coordonnées de l'adresse","content":{"application/json":{"schema":{"type":"object","properties":{"total":{"type":"number","description":"Nombre total de résultats"},"results":{"type":"array","items":{"title":"Réponse","x-refersTo":"http://schema.org/GeoCoordinates","type":"object","properties":{"lat":{"x-refersTo":"http://schema.org/latitude","title":"Latitude","type":"number"},"lon":{"x-refersTo":"http://schema.org/longitude","title":"Longitude","type":"number"},"type":{"title":"Type d'élément retourné","type":"string","enum":["municipality","street","locality"]},"label":{"type":"string","title":"Libellé de localisation","description":"Libellé de la localisation construit à partir des champs individuels et en fonction du type"},"name":{"x-refersTo":"http://schema.org/streetAddress","type":"string","title":"Nom de la voie ou du lieu-dit"},"city":{"x-refersTo":"http://schema.org/City","type":"string","title":"Nom de la commune"},"housenumber":{"x-refersTo":"http://www.ontotext.com/proton/protonext#StreetNumber","type":"string","title":"Numéro dans la voie","description":"Peut contenir des mots comme bis ou ter"},"postcode":{"x-refersTo":"http://schema.org/postalCode","type":"string","title":"Code postal","description":"sur 5 caractères"},"citycode":{"x-refersTo":"http://rdf.insee.fr/def/geo#codeCommune","type":"string","title":"Code INSEE de la commune","description":"sur 5 caractères"},"context":{"type":"string","title":"Contexte","description":"Région et département ou autre information contextuelle de l'adresse"}}}}}}}}}}}},"/coords":{"post":{"summary":"Géocoder un ensemble d'adresses","operationId":"postCoords","x-operationType":"http://schema.org/SearchAction","requestBody":{"description":"Ensemble d'adresses à géocoder","required":true,"content":{"application/json":{"schema":{"type":"array","x-collectionOn":"http://schema.org/PostalAddress","items":{"title":"Requête pour une adresse","type":"object","properties":{"key":{"x-refersTo":"http://schema.org/identifier","type":"string","description":"Identifiant de la ligne dans la requête en masse"},"q":{"x-refersTo":"http://schema.org/address","type":"string","title":"Requête textuelle","description":"Cette requête peut contenir n'importe quels éléments d'une adresse"},"name":{"x-refersTo":"http://schema.org/streetAddress","type":"string","title":"Nom de la voie ou du lieu-dit"},"city":{"x-refersTo":"http://schema.org/City","type":"string","title":"Nom de la commune"},"housenumber":{"x-refersTo":"http://www.ontotext.com/proton/protonext#StreetNumber","type":"string","title":"Numéro dans la voie","description":"Peut contenir des mots comme bis ou ter"},"postcode":{"x-refersTo":"http://schema.org/postalCode","type":"string","title":"Code postal","description":"sur 5 caractères"},"citycode":{"x-refersTo":"http://rdf.insee.fr/def/geo#codeCommune","type":"string","title":"Code INSEE de la commune","description":"sur 5 caractères"},"context":{"type":"string","title":"Contexte","description":"Région et département ou autre information contextuelle de l'adresse"}}}}},"application/x-ndjson":{"schema":{"x-collectionOn":"http://schema.org/PostalAddress","title":"Requête pour une adresse","type":"object","properties":{"key":{"x-refersTo":"http://schema.org/identifier","type":"string","description":"Identifiant de la ligne dans la requête en masse"},"q":{"x-refersTo":"http://schema.org/address","type":"string","title":"Requête textuelle","description":"Cette requête peut contenir n'importe quels éléments d'une adresse"},"name":{"x-refersTo":"http://schema.org/streetAddress","type":"string","title":"Nom de la voie ou du lieu-dit"},"city":{"x-refersTo":"http://schema.org/City","type":"string","title":"Nom de la commune"},"housenumber":{"x-refersTo":"http://www.ontotext.com/proton/protonext#StreetNumber","type":"string","title":"Numéro dans la voie","description":"Peut contenir des mots comme bis ou ter"},"postcode":{"x-refersTo":"http://schema.org/postalCode","type":"string","title":"Code postal","description":"sur 5 caractères"},"citycode":{"x-refersTo":"http://rdf.insee.fr/def/geo#codeCommune","type":"string","title":"Code INSEE de la commune","description":"sur 5 caractères"},"context":{"type":"string","title":"Contexte","description":"Région et département ou autre information contextuelle de l'adresse"}}}},"text/csv":{}}},"responses":{"200":{"description":"Géocodage des adresses","content":{"application/json":{"schema":{"type":"array","x-collectionOn":"http://schema.org/GeoCoordinates","items":{"title":"Réponse","x-refersTo":"http://schema.org/GeoCoordinates","type":"object","properties":{"lat":{"x-refersTo":"http://schema.org/latitude","title":"Latitude","type":"number"},"lon":{"x-refersTo":"http://schema.org/longitude","title":"Longitude","type":"number"},"type":{"title":"Type d'élément retourné","type":"string","enum":["municipality","street","locality"]},"label":{"type":"string","title":"Libellé de localisation","description":"Libellé de la localisation construit à partir des champs individuels et en fonction du type"},"name":{"x-refersTo":"http://schema.org/streetAddress","type":"string","title":"Nom de la voie ou du lieu-dit"},"city":{"x-refersTo":"http://schema.org/City","type":"string","title":"Nom de la commune"},"housenumber":{"x-refersTo":"http://www.ontotext.com/proton/protonext#StreetNumber","type":"string","title":"Numéro dans la voie","description":"Peut contenir des mots comme bis ou ter"},"postcode":{"x-refersTo":"http://schema.org/postalCode","type":"string","title":"Code postal","description":"sur 5 caractères"},"citycode":{"x-refersTo":"http://rdf.insee.fr/def/geo#codeCommune","type":"string","title":"Code INSEE de la commune","description":"sur 5 caractères"},"context":{"type":"string","title":"Contexte","description":"Région et département ou autre information contextuelle de l'adresse"},"key":{"x-refersTo":"http://schema.org/identifier","type":"string","description":"Identifiant de la ligne dans la requête en masse"},"error":{"description":"Si il y a eu une erreur dans le traitement d'une ligne","type":"string"},"status":{"description":"Si le traitement a été bon ou pas","type":"string"}}}}},"application/x-ndjson":{"schema":{"x-collectionOn":"http://schema.org/GeoCoordinates","title":"Réponse","x-refersTo":"http://schema.org/GeoCoordinates","type":"object","properties":{"lat":{"x-refersTo":"http://schema.org/latitude","title":"Latitude","type":"number"},"lon":{"x-refersTo":"http://schema.org/longitude","title":"Longitude","type":"number"},"type":{"title":"Type d'élément retourné","type":"string","enum":["municipality","street","locality"]},"label":{"type":"string","title":"Libellé de localisation","description":"Libellé de la localisation construit à partir des champs individuels et en fonction du type"},"name":{"x-refersTo":"http://schema.org/streetAddress","type":"string","title":"Nom de la voie ou du lieu-dit"},"city":{"x-refersTo":"http://schema.org/City","type":"string","title":"Nom de la commune"},"housenumber":{"x-refersTo":"http://www.ontotext.com/proton/protonext#StreetNumber","type":"string","title":"Numéro dans la voie","description":"Peut contenir des mots comme bis ou ter"},"postcode":{"x-refersTo":"http://schema.org/postalCode","type":"string","title":"Code postal","description":"sur 5 caractères"},"citycode":{"x-refersTo":"http://rdf.insee.fr/def/geo#codeCommune","type":"string","title":"Code INSEE de la commune","description":"sur 5 caractères"},"context":{"type":"string","title":"Contexte","description":"Région et département ou autre information contextuelle de l'adresse"},"key":{"x-refersTo":"http://schema.org/identifier","type":"string","description":"Identifiant de la ligne dans la requête en masse"},"error":{"description":"Si il y a eu une erreur dans le traitement d'une ligne","type":"string"},"status":{"description":"Si le traitement a été bon ou pas","type":"string"}}}},"text/csv":{}}}}}},"/geocode":{"post":{"summary":"Géocoder un ensemble de documents","operationId":"postGeocode","deprecated":true,"parameters":[{"in":"query","name":"select","description":"La liste des champs à retourner","required":false,"schema":{"default":["*"],"type":"array","items":{"type":"string","enum":["lat","lon","type","label","name","city","housenumber","postcode","citycode","context"]}},"style":"form","explode":false},{"name":"q","description":"Cette requête peut contenir n'importe quels éléments d'une adresse","in":"query","required":false,"schema":{"type":"string"},"x-refersTo":"http://schema.org/address"},{"name":"name","in":"query","required":false,"schema":{"type":"string"},"x-refersTo":"http://schema.org/streetAddress"},{"name":"city","in":"query","required":false,"schema":{"type":"string"},"x-refersTo":"http://schema.org/City"},{"name":"housenumber","description":"Peut contenir des mots comme bis ou ter","in":"query","required":false,"schema":{"type":"string"},"x-refersTo":"http://www.ontotext.com/proton/protonext#StreetNumber"},{"name":"postcode","description":"sur 5 caractères","in":"query","required":false,"schema":{"type":"string"},"x-refersTo":"http://schema.org/postalCode"},{"name":"citycode","description":"sur 5 caractères","in":"query","required":false,"schema":{"type":"string"},"x-refersTo":"http://rdf.insee.fr/def/geo#codeCommune"},{"name":"context","description":"Région et département ou autre information contextuelle de l'adresse","in":"query","required":false,"schema":{"type":"string"}}],"requestBody":{"description":"Ensemble de documents à géocoder","required":true,"content":{"application/json":{},"text/csv":{}}},"responses":{"200":{"description":"Documents complétés par les champs lat, lon et matchLevel","content":{"application/json":{},"text/csv":{}}}}}}}}